# GitHub Actions Workflow

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –≤—Å—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –∑–±—ñ—Ä–∫–∏ —Ç–∞ –¥–µ–ø–ª–æ—é.

## Workflow: Build & Deploy Gallery

–§–∞–π–ª: `.github/workflows/build-and-deploy.yml`

### –¢—Ä–∏–≥–µ—Ä

Workflow –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É push –¥–æ –≥—ñ–ª–∫–∏ `main`.

### –ü—Ä–æ—Ü–µ—Å –∑–±—ñ—Ä–∫–∏

1. **Checkout –∫–æ–¥** - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –∑ Git
2. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js 20** - –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
3. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** - –Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è npm –ø–∞–∫–µ—Ç—ñ–≤
4. **üîç –í–∞–ª—ñ–¥–∞—Ü—ñ—è YAML** - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö –Ω–∞ –ø–æ–º–∏–ª–∫–∏
   - –Ø–∫—â–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å, workflow –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è
   - –î–µ–ø–ª–æ–π –Ω–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
5. **üì∏ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è thumbnails** - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
   - 800px —à–∏—Ä–∏–Ω–∞ (–¥–ª—è –≥–∞–ª–µ—Ä–µ—ó)
   - 2000px —à–∏—Ä–∏–Ω–∞ (–¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É)
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è sharp (—à–≤–∏–¥—à–µ –∑–∞ ImageMagick)
6. **üìÅ –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤** - –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤ public –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
7. **üî® –ó–±—ñ—Ä–∫–∞ —Å–∞–π—Ç—É** - Astro build –ø—Ä–æ—Ü–µ—Å
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î gallery.json –∑ YAML —Ñ–∞–π–ª—ñ–≤
   - –°—Ç–≤–æ—Ä—é—î —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Å–∞–π—Ç –≤ `site/dist/`
8. **üöÄ –î–µ–ø–ª–æ–π** - –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –Ω–∞ GitHub Pages

### –©–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö** (`npm run validate`)
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –¥–∞—Ç
- –í–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ —É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è thumbnails** (`npm run thumbs`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–µ–≤—å—é –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ–≤
- 800px –¥–ª—è –≥–∞–ª–µ—Ä–µ—ó (—à–≤–∏–¥–∫–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
- Full-size –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —è–∫—ñ—Å—Ç—å –±–µ–∑ –∑–º–µ–Ω—à–µ–Ω–Ω—è)

‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö** (`npm run generate`)
- –ü–∞—Ä—Å–∏–Ω–≥ YAML —Ñ–∞–π–ª—ñ–≤
- –û–±'—î–¥–Ω–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ —Ç–∞ —Å–µ—Å—ñ–π
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ–≥–æ gallery.json

‚úÖ **–ó–±—ñ—Ä–∫–∞ —Ç–∞ –¥–µ–ø–ª–æ–π**
- –°—Ç–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è Astro —Å–∞–π—Ç—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è –Ω–∞ GitHub Pages

### –©–æ –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–±–∏—Ç–∏ –≤—Ä—É—á–Ω—É

‚ùå –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ thumbnails –ª–æ–∫–∞–ª—å–Ω–æ
‚ùå –ó–∞–ø—É—Å–∫–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º (–∞–ª–µ –º–æ–∂–Ω–∞ –¥–ª—è –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)
‚ùå –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ gallery.json
‚ùå –î–µ–ø–ª–æ—ó—Ç–∏ —Å–∞–π—Ç –≤—Ä—É—á–Ω—É

### –Ø–∫ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Actions" –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
2. –í–∏–±–µ—Ä—ñ—Ç—å –æ—Å—Ç–∞–Ω–Ω—ñ–π workflow run
3. –ü–µ—Ä–µ–≥–ª—è–Ω—Ç–µ –ª–æ–≥–∏ –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É
4. –£ —Ä–∞–∑—ñ –ø–æ–º–∏–ª–æ–∫, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —á–µ—Ä–≤–æ–Ω—ñ –∫—Ä–æ–∫–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü–æ–º–∏–ª–∫–∏ —Ç–∞ —ó—Ö –≤–∏—Ä—ñ—à–µ–Ω–Ω—è

#### Workflow fails –Ω–∞ –µ—Ç–∞–ø—ñ "Validate YAML files"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–∞–ª—ñ–¥–Ω—ñ YAML —Ñ–∞–π–ª–∏ –≤ `data/objects/` –∞–±–æ `data/sessions/`

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ: `npm run validate`
2. –í–∏–ø—Ä–∞–≤—Ç–µ –ø–æ–º–∏–ª–∫–∏ –∑–≥—ñ–¥–Ω–æ –∑ –≤–∏–≤–æ–¥–æ–º
3. –ó–∞–∫–æ–º—ñ—Ç—å—Ç–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
4. Push –∑–Ω–æ–≤—É

#### Workflow fails –Ω–∞ –µ—Ç–∞–ø—ñ "Generate thumbnails"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ñ–∞–π–ª

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤—Å—ñ —à–ª—è—Ö–∏ –≤ `finals.path` —ñ—Å–Ω—É—é—Ç—å
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ —Ñ–æ—Ä–º–∞—Ç—ñ PNG/JPG/TIFF
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ

#### Workflow fails –Ω–∞ –µ—Ç–∞–ø—ñ "Build site"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–º–∏–ª–∫–∞ –≤ –∫–æ–¥—ñ Astro –∞–±–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ: `cd site && npm run dev`
2. –í–∏–ø—Ä–∞–≤—Ç–µ –ø–æ–º–∏–ª–∫–∏ –≤ –∫–æ–¥—ñ
3. –ó–∞–∫–æ–º—ñ—Ç—å—Ç–µ —Ç–∞ push

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è workflow

–ü–æ—Ç–æ—á–Ω–∏–π workflow –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è:
- ‚ö° –®–≤–∏–¥–∫–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó (–∑—É–ø–∏–Ω–∫–∞ –Ω–∞ –ø–µ—Ä—à—ñ–π –ø–æ–º–∏–ª—Ü—ñ)
- üì¶ –ö–µ—à—É–≤–∞–Ω–Ω—è npm –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- üñºÔ∏è –ï—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ sharp
- üöÄ –ü–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∫—Ä–æ–∫—ñ–≤

### –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–¢–∏–ø–æ–≤–∏–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è workflow:
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è: ~5-10 —Å–µ–∫—É–Ω–¥
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è thumbnails: ~30-60 —Å–µ–∫—É–Ω–¥ (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–æ–±—Ä–∞–∂–µ–Ω—å)
- –ó–±—ñ—Ä–∫–∞ —Å–∞–π—Ç—É: ~20-40 —Å–µ–∫—É–Ω–¥
- –î–µ–ø–ª–æ–π: ~10-20 —Å–µ–∫—É–Ω–¥

**–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å:** 1-2 —Ö–≤–∏–ª–∏–Ω–∏

### Permissions

Workflow –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ:
- `contents: read` - –ß–∏—Ç–∞–Ω–Ω—è –∫–æ–¥—É –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
- `pages: write` - –ó–∞–ø–∏—Å –Ω–∞ GitHub Pages
- `id-token: write` - –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –¥–ª—è –¥–µ–ø–ª–æ—é

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç—É: [../CLAUDE.md](../CLAUDE.md)

–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç: [../QUICK_START.md](../QUICK_START.md)
